/*
 *  jQuery Ooyala - v1.0.0
 *  An easy-to-use, extensible wrapper around Ooyala's Player Javascript API
 *  https://github.com/refinery29/jquery-ooyala
 *
 *  Made with love by Refinery29, Inc.
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(b,c){this.el=b,this.$el=a(b),this.settings=a.extend(!0,{},m,c),this._ooNamespace="OO"+l++,this._defaults=m,this._name=k,this._player=null,this.init()}function f(){var a=this;a.getPlayer().done(function(){g.call(a)}).fail(function(){var b=new Error("Could not retrieve player with id "+a.settings.playerId);a.$el.removeClass("oo-player-loading").addClass("oo-player-error").trigger("ooyala.error",[b])})}function g(){var a=this,c=b[a._ooNamespace];c.ready(function(){var b=a.$el.find(".oo-player-video-container").attr("id"),d=a.settings.contentId;a.settings.playerParams.onCreate&&j(console)&&"function"==typeof console.debug&&console.debug("($.ooyala) ignoring onCreate playerParam. Use .on('ooyala.ready') to gain access to the player and the OO object"),a.settings.playerParams.onCreate=function(b){i.call(a,b,c)},c.Player.create(b,d,a.settings.playerParams)})}function h(){var b=this.settings.playerPlacement,c=a("<div id='video_"+this.settings.contentId+"' class='oo-player-video-container'></div>");"append"===b?this.$el.append(c):"prepend"===b?this.$el.prepend(c):"function"==typeof b&&b.call(this.$el,c),this.$el.addClass("oo-player oo-player-loading")}function i(a,b){var c,d,e=this;c=function(a){return function(){var b=[].slice.call(arguments);e.$el.trigger("ooyala.event."+a,b)}};for(d in b.Events)Object.prototype.hasOwnProperty.call(b.Events,d)&&a.mb.subscribe(b.Events[d],"oo-player",c(d));this._player=a,this.$el.removeClass("oo-player-loading").addClass("oo-player-ready").trigger("ooyala.ready",[this._player,b])}function j(a){return"object"==typeof a&&null!==a}var k="ooyala",l=0,m={contentId:d,favorHtml5:!0,lazyLoadOn:d,playerId:d,playerParams:{},playerPlacement:"append",urlParams:{}};e.prototype={init:function(){var a=this;if(!this.settings.playerId)throw new Error("You must provide a playerId to $.fn.ooyala()");if(!this.settings.contentId)throw new Error("You must provide a contentId to $.fn.ooyala()");h.call(this),"string"==typeof this.settings.lazyLoadOn?this.$el.on(this.settings.lazyLoadOn,function(){f.call(a)}):f.call(this)},getPlayer:function(){var b="//player.ooyala.com/v3/"+this.settings.playerId,c=this.settings.urlParams;return c.platform||(c.platform=this.settings.favorHtml5?"html5-priority":"flash"),c.namespace=this._ooNamespace,a.ajax({dataType:"script",cache:!0,url:b+"/?"+a.param(c)})}},a.fn[k]=function(b){return this.each(function(){a.data(this,k)||a.data(this,k,new e(this,b))}),this}}(jQuery,window,document);